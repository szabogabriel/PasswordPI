import os

PLAIN = 0x00
SHIFT = 0x02

keyRelease = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00')

hidMapping = {
    "a" : bytearray(b'\x00\x00\x04\x00\x00\x00\x00\x00'),
    "A" : bytearray(b'\x02\x00\x04\x00\x00\x00\x00\x00'),
    "b" : bytearray(b'\x00\x00\x05\x00\x00\x00\x00\x00'),
    "B" : bytearray(b'\x02\x00\x05\x00\x00\x00\x00\x00'),
    "c" : bytearray(b'\x00\x00\x06\x00\x00\x00\x00\x00'),
    "C" : bytearray(b'\x02\x00\x06\x00\x00\x00\x00\x00'),
    "d" : bytearray(b'\x00\x00\x07\x00\x00\x00\x00\x00'),
    "D" : bytearray(b'\x02\x00\x07\x00\x00\x00\x00\x00'),
    "e" : bytearray(b'\x00\x00\x08\x00\x00\x00\x00\x00'),
    "E" : bytearray(b'\x02\x00\x08\x00\x00\x00\x00\x00'),
    "f" : bytearray(b'\x00\x00\x09\x00\x00\x00\x00\x00'),
    "F" : bytearray(b'\x02\x00\x09\x00\x00\x00\x00\x00'),
    "g" : bytearray(b'\x00\x00\x0A\x00\x00\x00\x00\x00'),
    "G" : bytearray(b'\x02\x00\x0A\x00\x00\x00\x00\x00'),
    "h" : bytearray(b'\x00\x00\x0B\x00\x00\x00\x00\x00'),
    "H" : bytearray(b'\x02\x00\x0B\x00\x00\x00\x00\x00'), 
    "i" : bytearray(b'\x00\x00\x0C\x00\x00\x00\x00\x00'),
    "I" : bytearray(b'\x02\x00\x0C\x00\x00\x00\x00\x00'),
    "j" : bytearray(b'\x00\x00\x0D\x00\x00\x00\x00\x00'),
    "J" : bytearray(b'\x02\x00\x0D\x00\x00\x00\x00\x00'), 
    "k" : bytearray(b'\x00\x00\x0E\x00\x00\x00\x00\x00'),
    "K" : bytearray(b'\x02\x00\x0E\x00\x00\x00\x00\x00'), 
    "l" : bytearray(b'\x00\x00\x0F\x00\x00\x00\x00\x00'),
    "L" : bytearray(b'\x02\x00\x0F\x00\x00\x00\x00\x00'), 
    "m" : bytearray(b'\x00\x00\x10\x00\x00\x00\x00\x00'),
    "M" : bytearray(b'\x02\x00\x10\x00\x00\x00\x00\x00'), 
    "n" : bytearray(b'\x00\x00\x11\x00\x00\x00\x00\x00'),
    "N" : bytearray(b'\x02\x00\x11\x00\x00\x00\x00\x00'), 
    "o" : bytearray(b'\x00\x00\x12\x00\x00\x00\x00\x00'),
    "O" : bytearray(b'\x02\x00\x12\x00\x00\x00\x00\x00'), 
    "p" : bytearray(b'\x00\x00\x13\x00\x00\x00\x00\x00'),
    "P" : bytearray(b'\x02\x00\x13\x00\x00\x00\x00\x00'), 
    "q" : bytearray(b'\x00\x00\x14\x00\x00\x00\x00\x00'),
    "Q" : bytearray(b'\x02\x00\x14\x00\x00\x00\x00\x00'), 
    "r" : bytearray(b'\x00\x00\x15\x00\x00\x00\x00\x00'),
    "R" : bytearray(b'\x02\x00\x15\x00\x00\x00\x00\x00'), 
    "s" : bytearray(b'\x00\x00\x16\x00\x00\x00\x00\x00'),
    "S" : bytearray(b'\x02\x00\x16\x00\x00\x00\x00\x00'), 
    "t" : bytearray(b'\x00\x00\x17\x00\x00\x00\x00\x00'),
    "T" : bytearray(b'\x02\x00\x17\x00\x00\x00\x00\x00'), 
    "u" : bytearray(b'\x00\x00\x18\x00\x00\x00\x00\x00'),
    "U" : bytearray(b'\x02\x00\x18\x00\x00\x00\x00\x00'), 
    "v" : bytearray(b'\x00\x00\x19\x00\x00\x00\x00\x00'),
    "V" : bytearray(b'\x02\x00\x19\x00\x00\x00\x00\x00'), 
    "w" : bytearray(b'\x00\x00\x1A\x00\x00\x00\x00\x00'),
    "W" : bytearray(b'\x02\x00\x1A\x00\x00\x00\x00\x00'), 
    "x" : bytearray(b'\x00\x00\x1B\x00\x00\x00\x00\x00'),
    "X" : bytearray(b'\x02\x00\x1B\x00\x00\x00\x00\x00'), 
    "y" : bytearray(b'\x00\x00\x1C\x00\x00\x00\x00\x00'),
    "Y" : bytearray(b'\x02\x00\x1C\x00\x00\x00\x00\x00'), 
    "z" : bytearray(b'\x00\x00\x1D\x00\x00\x00\x00\x00'),
    "Z" : bytearray(b'\x02\x00\x1D\x00\x00\x00\x00\x00'),
    "1" : bytearray(b'\x00\x00\x1E\x00\x00\x00\x00\x00'),
    "2" : bytearray(b'\x00\x00\x1F\x00\x00\x00\x00\x00'),
    "3" : bytearray(b'\x00\x00\x20\x00\x00\x00\x00\x00'),
    "4" : bytearray(b'\x00\x00\x21\x00\x00\x00\x00\x00'),
    "5" : bytearray(b'\x00\x00\x22\x00\x00\x00\x00\x00'),
    "6" : bytearray(b'\x00\x00\x23\x00\x00\x00\x00\x00'),
    "7" : bytearray(b'\x00\x00\x24\x00\x00\x00\x00\x00'),
    "8" : bytearray(b'\x00\x00\x25\x00\x00\x00\x00\x00'),
    "9" : bytearray(b'\x00\x00\x26\x00\x00\x00\x00\x00'),
    "0" : bytearray(b'\x00\x00\x27\x00\x00\x00\x00\x00'),
    "!" : bytearray(b'\x02\x00\x1E\x00\x00\x00\x00\x00'),
    "@" : bytearray(b'\x02\x00\x1F\x00\x00\x00\x00\x00'),
    "#" : bytearray(b'\x02\x00\x20\x00\x00\x00\x00\x00'),
    "$" : bytearray(b'\x02\x00\x21\x00\x00\x00\x00\x00'),
    "%" : bytearray(b'\x02\x00\x22\x00\x00\x00\x00\x00'),
    "^" : bytearray(b'\x02\x00\x23\x00\x00\x00\x00\x00'),
    "&" : bytearray(b'\x02\x00\x24\x00\x00\x00\x00\x00'),
    "*" : bytearray(b'\x02\x00\x25\x00\x00\x00\x00\x00'),
    "(" : bytearray(b'\x02\x00\x26\x00\x00\x00\x00\x00'),
    ")" : bytearray(b'\x02\x00\x27\x00\x00\x00\x00\x00'),
    os.linesep : bytearray(b'\x00\x00\x28\x00\x00\x00\x00\x00'),
    "\t" : bytearray(b'\x00\x00\x2B\x00\x00\x00\x00\x00'),
    " " : bytearray(b'\x00\x00\x2C\x00\x00\x00\x00\x00'),
    "-" : bytearray(b'\x00\x00\x2D\x00\x00\x00\x00\x00'),
    "_" : bytearray(b'\x02\x00\x2D\x00\x00\x00\x00\x00'),
    "=" : bytearray(b'\x00\x00\x2E\x00\x00\x00\x00\x00'),
    "+" : bytearray(b'\x02\x00\x2E\x00\x00\x00\x00\x00'),
    "[" : bytearray(b'\x00\x00\x2F\x00\x00\x00\x00\x00'),
    "{" : bytearray(b'\x02\x00\x2F\x00\x00\x00\x00\x00'),
    "]" : bytearray(b'\x00\x00\x30\x00\x00\x00\x00\x00'),
    "}" : bytearray(b'\x02\x00\x30\x00\x00\x00\x00\x00'),
    "\\" : bytearray(b'\x00\x00\x31\x00\x00\x00\x00\x00'),
    "|" : bytearray(b'\x02\x00\x31\x00\x00\x00\x00\x00'),
    "#" : bytearray(b'\x00\x00\x32\x00\x00\x00\x00\x00'),
    "~" : bytearray(b'\x02\x00\x32\x00\x00\x00\x00\x00'),
    ";" : bytearray(b'\x00\x00\x33\x00\x00\x00\x00\x00'),
    ":" : bytearray(b'\x02\x00\x33\x00\x00\x00\x00\x00'),
    "'" : bytearray(b'\x00\x00\x34\x00\x00\x00\x00\x00'),
    '"' : bytearray(b'\x02\x00\x34\x00\x00\x00\x00\x00'),
    "`" : bytearray(b'\x00\x00\x35\x00\x00\x00\x00\x00'),
    "~" : bytearray(b'\x02\x00\x35\x00\x00\x00\x00\x00'),
    "," : bytearray(b'\x00\x00\x36\x00\x00\x00\x00\x00'),
    "<" : bytearray(b'\x02\x00\x36\x00\x00\x00\x00\x00'),
    "." : bytearray(b'\x00\x00\x37\x00\x00\x00\x00\x00'),
    ">" : bytearray(b'\x02\x00\x37\x00\x00\x00\x00\x00'),
    "/" : bytearray(b'\x00\x00\x38\x00\x00\x00\x00\x00'),
    "?" : bytearray(b'\x02\x00\x38\x00\x00\x00\x00\x00'),
}


def write(data):
    for val in data:
        with open('/dev/hidg0', 'rb+') as fd:
            fd.write(hidMapping[val])
            fd.write(keyRelease)
